<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="/css/full_screen.css">
    <script src="/script/echarts.js"></script>
    <script src="/script/jquery.js"></script>
    <script src="/script/config.js"></script>
    <title>复杂的拓扑结构绘制</title>
</head>
<body>
<div class="full" id="main"></div>
<script type="text/javascript">
    // import * as echarts from 'echarts';

    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('main'));
    myChart.showLoading();
    var option;
    var url = protocol + ip + ':' + port + sep + req_topology_pattern;

    $.get(url, function (graph) {
        myChart.hideLoading();

        // alert(graph);

        graph.nodes.forEach(function (node) {
            node.symbolsize = 5;
        });

        // 选项设置
        option = {
            title: {
                text: '拓扑结构可视化',
                subtext: '拓扑图',
                top: 'top',
                left: 'left'
            },
            tooltip: {},
            legend: [
                {
                    data: graph.categories.map(function (value) {
                        return value.name;
                    })
                }
            ],
            series: [
                {
                    name: '结点',
                    type: 'graph',
                    layout: 'force',
                    data: graph.nodes,
                    links: graph.links,
                    categories: graph.categories,
                    roam: true,
                    label: {
                        pos: 'right',
                        // fontSize:12
                    },
                    force: {
                        repulsion: 100
                    }
                }
            ]
        };

        // 打印获取到的请求
        alert(graph);

        myChart.setOption(option);
    })


</script>
</body>
</html>